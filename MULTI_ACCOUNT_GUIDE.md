# 🎯 멀티 계정 사용 가이드

## 📋 개요

여러 개의 동행복권 계정을 등록하여 한 번에 예치금 확인 및 로또 구매를 진행할 수 있습니다.

## 🔧 설정 방법

### 1. config.json 형식

```json
{
  "accounts": [
    {
      "userId": "account1",
      "password": "password1"
    },
    {
      "userId": "account2",
      "password": "password2"
    },
    {
      "userId": "account3",
      "password": "password3"
    }
  ],
  "telegramBotToken": "your_telegram_bot_token",
  "telegramChatId": "your_telegram_chat_id"
}
```

### 2. 계정 추가하기

`config.json` 파일의 `accounts` 배열에 새로운 계정을 추가하면 됩니다:

```json
{
  "accounts": [
    {
      "userId": "기존계정",
      "password": "기존비밀번호"
    },
    {
      "userId": "새계정",      // 👈 새로 추가
      "password": "새비밀번호"  // 👈 새로 추가
    }
  ],
  "telegramBotToken": "...",
  "telegramChatId": "..."
}
```

## 📱 텔레그램 알림

각 계정별로 알림이 구분되어 전송됩니다:

- `(prorion) ✅ 로또 구매 성공!`
- `(account2) ⚠️ 예치금 부족 알림`
- `(account3) ❌ 로그인 실패`

## 🔄 실행 순서

### 예치금 확인 (-check)
```
계정 1/3: prorion
  → 로그인
  → 예치금 확인
  
계정 2/3: account2
  → 로그인
  → 예치금 확인
  
계정 3/3: account3
  → 로그인
  → 예치금 확인
```

### 로또 구매 (-once 또는 기본 모드)
```
계정 1/3: prorion
  → 로그인
  → 구매 페이지 접근
  → 5게임 구매
  
계정 2/3: account2
  → 로그인
  → 구매 페이지 접근
  → 5게임 구매
  
계정 3/3: account3
  → 로그인
  → 구매 페이지 접근
  → 5게임 구매
```

## ⚙️ 세션 관리

- 각 계정은 **독립적인 HTTP 클라이언트 세션**을 사용합니다
- 로그아웃 처리 없이도 계정이 자동으로 분리됩니다
- 한 계정의 오류가 다른 계정에 영향을 주지 않습니다

## 🎯 실행 예시

### 모든 계정 예치금 확인
```powershell
.\dhlottery.exe -check
```

### 모든 계정 로또 구매
```powershell
.\dhlottery.exe -once
```

### 모든 계정 예치금 확인 후 구매 (기본 모드)
```powershell
.\dhlottery.exe
```

### 테스트 모드 (모든 계정)
```powershell
.\dhlottery.exe -dryrun
```

## 📊 로그 출력 예시

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
          🎱 로또 구매 작업
          (총 3개 계정)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌─────────────────────────────────────┐
│ 계정 1/3: prorion
└─────────────────────────────────────┘

=== 로그인 시작 ===
1단계: 로그인 페이지 접속 중...
2단계: RSA 공개키 가져오는 중...
✅ 로그인 완료!

=== 로또 6/45 구매 페이지 접근 ===
✅ 로또 6/45 구매 페이지 접근 성공!

=== 로또 자동 구매 (5게임) ===
2단계: 구매 정보 추출 중...
   → 현재 회차: 1234회
   → 추첨일: 2026-01-18
✅ 구매가 성공적으로 완료되었습니다!

┌─────────────────────────────────────┐
│ 계정 2/3: account2
└─────────────────────────────────────┘

...
```

## ⚠️ 주의사항

1. **한도 제한**: 온라인으로는 1회차당 계정당 5게임(5,000원)까지만 구매 가능합니다.
2. **예치금**: 각 계정마다 최소 5,000원 이상의 예치금이 필요합니다.
3. **동시 실행**: 계정들은 **순차적**으로 처리되며, 동시 실행되지 않습니다.
4. **로그 파일**: 모든 계정의 로그가 하나의 파일(`logs/lottery_YYYY-MM-DD.log`)에 기록됩니다.

## 💡 팁

- **계정 순서**: `accounts` 배열의 순서대로 처리됩니다.
- **실패 처리**: 한 계정이 실패해도 다음 계정은 계속 진행됩니다.
- **텔레그램**: 각 계정의 결과가 개별 메시지로 전송됩니다.
- **스케줄러**: 스케줄러 모드에서도 모든 계정이 자동으로 처리됩니다.
